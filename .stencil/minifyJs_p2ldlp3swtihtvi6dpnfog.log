/*! Built with http://stenciljs.com */
const{h:e}=window.App;class l{constructor(){this.allowDrop=!0,this.allowClick=!0,this.allowMultiple=!0,this.accept=[],this.error=[],this.stringsText=""}componentDidLoad(){this.initDragDropArea()}initDragDropArea(){this.stringsText=1==this.allowDrop&&1==this.allowClick?1==this.allowMultiple?"Please drop files here or ":"Please drop file or ":1==this.allowDrop&&0==this.allowClick?1==this.allowMultiple?"Please drop files":"Please drop file":0==this.allowDrop&&1==this.allowClick?"":"Please allow drop or allow Click"}handleChange(e){this.addedFiles(e.target.files)}drop(e){if(e.preventDefault(),1==this.allowMultiple)this.addedFiles(e.dataTransfer.files);else if(e.dataTransfer.files.length>1){this.errorHandler("You can upload single file at a time.");let l=[];l=[...l,e.dataTransfer.files[0]],this.addedFiles(l)}else this.addedFiles(e.dataTransfer.files)}addedFiles(e){var l;if(this.accept==[]||0==this.accept.length||null==this.accept)this.filesChosen.emit(e);else{let t=[];for(let s=0;s<e.length;s++){l=!1;for(let i=0;i<this.accept.length;i++)if(1==this.formatValidator(this.accept[i],e[s].type)){l=!0,t=[...t,e[s]];break}0==l&&this.errorHandler("Please select the file of required format.")}this.filesChosen.emit(t)}}formatValidator(e,l){return(e=e.slice(e.indexOf(".")+1,e.length))==l.slice(l.indexOf("/")+1,l.length)}allowDropFile(e){1==this.allowDrop&&e.preventDefault()}errorHandler(e){let l;this.error=[...this.error,e],clearInterval(l),l=setInterval(()=>{this.error=[]},5e3)}render(){var l=1==this.allowMultiple;return[e("div",{class:"st_container"},e("div",{class:"st_top_50 dashed-border",onDrop:e=>this.drop(e),onDragOver:e=>this.allowDropFile(e)},e("div",{class:"st_file_contain st_text-center"},e("div",{class:"st_file_icon"},e("div",{class:"st_scb-drop-area"},e("img",{src:"/assets/icon/arrow-pointing-up.svg"}))),e("div",{class:"st_scb-fi-default-label"},e("slot",{name:"drop-target"},e("p",null,this.stringsText," ")),e("slot",{name:"text"})),1==this.allowClick?e("div",{class:"st_file-upload"},e("slot",{name:"dialog-trigger"},e("label",{class:"st_file-upload__label"},"Choose",1==this.allowMultiple?" Files":" File")),e("input",{id:"upload",class:"st_file-upload__input",type:"file",onChange:e=>this.handleChange(e),accept:this.accept.toString(),multiple:l})):null,e("div",{class:"st_scb-fi-default-error"},this.error.map(l=>e("p",{class:"error_one"},e("img",{src:"/assets/icon/error-triangle.svg"}),l," "))))))]}static get is(){return"cwc-file-chooser"}static get properties(){return{accept:{type:"Any",attr:"accept"},allowClick:{type:Boolean,attr:"allow-click"},allowDrop:{type:Boolean,attr:"allow-drop"},allowMultiple:{type:Boolean,attr:"allow-multiple"},error:{state:!0},stringsText:{state:!0}}}static get events(){return[{name:"filesChosen",method:"filesChosen",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return"/**style-placeholder:cwc-file-chooser:**/"}}export{l as CwcFileChooser};